library(tidyverse)
library(tidyverse)
load("datos/planilla_general.RData")
datos %>%
select()
head(datos)
datos %>%
filter(type == "Mammal") %>%
select(sitio = site, sistema = station, camara = camera, datetime)
datos %>%
filter(type == "Mammal") %>%
select(sitio = site, sistema = station, camara = camera, datetime, sp = species)
datos <- datos %>%
filter(type == "Mammal") %>%
select(sitio = site, sistema = station, camara = camera, datetime, sp = species)
bookdown:::serve_book()
bookdown:::serve_book()
session_info()
xfun::session_info()
datos <- datos %>%
filter(type == "Mammal") %>%
select(sitio = site, sistema = station, camara = camera, datetime, sp = species)
kable(head(datos))
kable(head(datos), booktabs = TRUE)
bookdown:::serve_book()
bookdown:::serve_book()
<ul style="list-style-type: none">
install.packages("openmeteo")
library(openmeteo)
library("openmeteo")
weather_history()
weather_history("Laguna de Rocha, Uruguay",
start = "2020-01-01",
end = "2020-01-05",
hourly = "cloudcover"
)
weather_history("Uruguay",
start = "2020-01-01",
end = "2020-01-05",
hourly = "cloudcover"
)
weather_history(c(-34.666311631255184, -56.217928174121674),
start = "2020-01-01",
end = "2020-01-05",
hourly = "cloudcover"
)
weather_history(c(-34.666311631255184, -56.217928174121674),
start = "2020-01-01",
end = "2020-01-05"
)
weather_variables()
weather_history(c(-34.666311631255184, -56.217928174121674),
start = "2020-01-01",
end = "2020-01-05",
daily = c("precipitation_sum", "temperature_2m_min")
)
weather_history(c(-34.666311631255184, -56.217928174121674),
start = "2020-01-01",
end = "2020-01-05",
daily = c("precipitation_sum", "temperature_2m_min", "temperature_2m_mean", "weather_code")
)
weather_history(c(-34.666311631255184, -56.217928174121674),
start = "2020-01-01",
end = "2020-01-05",
daily = c("precipitation_sum", "temperature_2m_min", "temperature_2m_mean", "temperature_2m_max", "weather_code")
)
reprex:::reprex_addin()
weather_history(c(-34.666311631255184, -56.217928174121674),
start = "2020-01-01",
end = "2020-01-05",
daily = c("precipitation_sum", "precipitation_hours", "temperature_2m_min", "temperature_2m_mean", "temperature_2m_max", "weather_code")
)
weather_history(c(-34.666311631255184, -56.217928174121674),
start = "2020-01-01",
end = "2020-01-05",
daily = c("wind_speed_10m_mean", "precipitation_sum", "precipitation_hours", "temperature_2m_min", "temperature_2m_mean", "temperature_2m_max", "weather_code")
)
load("datos/planilla_general.RData")
datos <- datos %>%
filter(type == "Mammal") %>%
select(sitio = site, sistema = station, camara = camera, datetime, sp = species)
knitr::opts_chunk$set(warning = FALSE,
message = FALSE)
library(tidyverse)
library(rmarkdown)
library(knitr)
load("datos/planilla_general.RData")
datos <- datos %>%
filter(type == "Mammal") %>%
select(sitio = site, sistema = station, camara = camera, datetime, sp = species)
kable(head(datos), booktabs = TRUE)
library("openmeteo")
# OBS: Laguna De Rocha tiene dos campañas, se podría separar el sitio como LR_A y LR_B. Ahora se elimina LR.
fechas_con_registro <- datos %>%
select(sitio, datetime) %>%
mutate(fecha = as_date(datetime)) %>%
select(sitio, fecha) %>%
group_by(sitio) %>%
summarise(primera_fecha = min(fecha), ultima_fecha = max(fecha)) %>%
filter(sitio != "LR")
# Falta latitud y longitud de cada sitio, se agregan en hard coding.
fechas_con_registro <- fechas_con_registro %>%
add_column("latitud" = c(-34.37487817037226, -33.93997278713127, -34.776719666347454, -33.966788259313375, -34.78333836597851, -33.710087830803594),
"longitud" = c(-53.809678593289696, -53.528272451849645, -54.55898221076165, -53.645583740898076, -55.39359956154083, -53.5664228091683))
kable(fechas_con_registro, booktabs = TRUE)
load("datos/generados/datos_clima.RData")
paged_table(datos_clima)
datos_clima %>%
select(daily_weather_code) %>%
distinct() %>%
arrange(daily_weather_code)
registros_por_camara_por_especie_por_dia <- datos %>%
mutate(fecha = as_date(datetime)) %>%
group_by(sitio, camara, fecha, sp) %>%
summarise(registros = n())
datos2 <- datos_clima %>%
select(sitio, fecha = date, daily_wind_speed_10m_mean, daily_precipitation_sum, daily_temperature_2m_mean, daily_weather_code) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha))
datos2 %>% select(daily_weather_code) %>% distinct()
datos2 <- datos_clima %>%
select(sitio, fecha = date, daily_wind_speed_10m_mean, daily_precipitation_sum, daily_temperature_2m_mean, daily_weather_code) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha)) %>%
drop_na()
datos2 %>% select(daily_weather_code) %>% distinct()
a <- datos_clima %>%
mutate(daily_weather = case_when(
daily_weather_code <= 3 ~ "despejado",
daily_weather_code > 50 | daily_weather_code <60 ~ "llovizna",
daily_weather_code >= 60 ~ "lluvia",
))
b <- a %>%
select(sitio, fecha = date, daily_weather) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha)) %>%
filter(sp == "Cchi")
ggplot(data = b) +
geom_point(aes(x = registros, y = daily_weather))
a <- datos_clima %>%
drop_na() %>%
mutate(daily_weather = case_when(
daily_weather_code <= 3 ~ "despejado",
daily_weather_code > 50 | daily_weather_code <60 ~ "llovizna",
daily_weather_code >= 60 ~ "lluvia",
))
b <- a %>%
select(sitio, fecha = date, daily_weather) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha)) %>%
filter(sp == "Cchi")
ggplot(data = b) +
geom_point(aes(x = registros, y = daily_weather))
a
b
b <- a %>%
select(sitio, fecha = date, daily_weather) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha))
a <- datos_clima %>%
drop_na() %>%
mutate(daily_weather = case_when(
daily_weather_code <= 3 ~ "despejado",
daily_weather_code > 50 | daily_weather_code <60 ~ "llovizna",
daily_weather_code >= 60 ~ "lluvia",
))
b <- a %>%
select(sitio, fecha = date, daily_weather) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha))
ggplot(data = b) +
geom_point(aes(x = registros, y = daily_weather))
b <- a %>%
select(sitio, fecha = date, daily_weather) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha)) %>%
drop_na()
ggplot(data = b) +
geom_point(aes(x = registros, y = daily_weather))
a <- datos_clima %>%
drop_na() %>%
mutate(daily_precipitation = case_when(
daily_precipitation_hours <= 1 ~ "menos1",
daily_precipitation_hours > 1 | daily_precipitation_hours < 3 ~ "entre1y3",
daily_precipitation_hours >= 3 ~ "masde3",
))
b <- a %>%
select(sitio, fecha = date, daily_weather) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha)) %>%
drop_na()
a <- datos_clima %>%
drop_na() %>%
mutate(daily_weather = case_when(
daily_precipitation_hours <= 1 ~ "menos1",
daily_precipitation_hours > 1 | daily_precipitation_hours < 3 ~ "entre1y3",
daily_precipitation_hours >= 3 ~ "masde3",
))
b <- a %>%
select(sitio, fecha = date, daily_weather) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha)) %>%
drop_na()
ggplot(data = b) +
geom_point(aes(x = registros, y = daily_weather))
datos_clima
ggplot(data = b) +
geom_point(aes(x = registros, y = daily_weather))
datos2
ggplot(data = datos2) +
geom_point(aes(x = sp, y = daily_temperature_2m_mean))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_temperature_2m_mean))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_precipitation_sum))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_weather_code))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_wind_speed_10m_mean))
datos2 <- datos_clima %>%
select(fecha = date, everything()) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha)) %>%
drop_na()
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_wind_speed_10m_mean))
datos2
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_wind_speed_10m_max))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_wind_gusts_10m_max))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_wind_speed_10m_mean))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_precipitation_sum))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_precipitation_hours))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_temperature_2m_min))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_temperature_2m_mean))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_temperature_2m_max))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = daily_weather_code))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = registros))
datos2 <- datos_clima %>%
select(fecha = date, everything()) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha)) %>%
drop_na() %>%
mutate(datetime = as_datetime(fecah))
datos2 <- datos_clima %>%
select(fecha = date, everything()) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha)) %>%
drop_na() %>%
mutate(datetime = as_datetime(fecha))
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = datetime))
registros_por_camara_por_especie_por_dia <- datos %>%
mutate(fecha = as_date(datetime)) %>%
group_by(sitio, camara, fecha, sp) %>%
summarise(registros = n())
datos2 <- datos_clima %>%
select(fecha = date, everything()) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha)) %>%
drop_na() %>%
mutate(tiempo_decimal = hour(as_datetime(fecha)) + minute(as_datetime(fecha))/60 + second(as_datetime(fecha))/3600)
datos2
as_datetime(fecha)
datos2 <- datos_clima %>%
select(fecha = date, everything()) %>%
right_join(registros_por_camara_por_especie_por_dia, by = join_by(sitio, fecha)) %>%
drop_na() %>%
mutate(tiempo_decimal = hour(fecha) + minute(fecha)/60 + second(fecha)/3600)
datos2
hour(fecha)
datos2
registros_por_camara_por_especie_por_dia
datos2 <- datos_clima %>%
select(fecha = date, everything()) %>%
right_join(datos, by = join_by(sitio, fecha)) %>%
drop_na() %>%
mutate(tiempo_decimal = hour(fecha) + minute(fecha)/60 + second(fecha)/3600)
datos
datetime %>%
mutate(fecha = as_date(datetime))
datos %>%
mutate(fecha = as_date(datetime))
head(datos_clima)
datos2 <- datos %>%
mutate(date = as_date(datetime)) %>%
left_join(datos_clima, join_by(sitio, date))
datos2
datos2 <- datos %>%
mutate(date = as_date(datetime)) %>%
left_join(datos_clima, join_by(sitio, date)) %>%
mutate(tiempo_decimal = hour(fecha) + minute(fecha)/60 + second(fecha)/3600)
datos2 <- datos %>%
mutate(date = as_date(datetime)) %>%
left_join(datos_clima, join_by(sitio, date)) %>%
mutate(tiempo_decimal = hour(datetime) + minute(datetime)/60 + second(datetime)/3600)
datos2
ggplot(data = datos2) +
geom_boxplot(aes(x = sp, y = tiempo_decimal))
datos2 %>%
filter(sp == "Sgou")
datos2 %>%
filter(sp == "Mgou")
datos3 <- datos2 %>%
filter(sp == "Mgou")
ggplot(data = datos3) +
geom_boxplot(aes(x = tiempo_decimal, y = daily_wind_speed_10m_max))
ggplot(data = datos3) +
geom_point(aes(x = tiempo_decimal, y = daily_wind_speed_10m_max))
ggplot(data = datos3) +
geom_point(aes(x = tiempo_decimal, y = daily_precipitation_hours))
ggplot(data = datos3) +
geom_point(aes(x = tiempo_decimal, y = daily_temperature_2m_min))
ggplot(data = datos3) +
geom_point(aes(x = tiempo_decimal, y = daily_precipitation_sum))
ggplot(data = datos2) +
geom_point(aes(x = tiempo_decimal, y = daily_precipitation_sum))
ggplot(data = datos2) +
geom_point(aes(x = tiempo_decimal, y = daily_weather_code))
ggplot(data = datos2) +
geom_point(aes(x = tiempo_decimal, y = daily_temperature_2m_min))
ggplot(data = datos2) +
geom_point(aes(x = tiempo_decimal, y = daily_precipitation_hours))
ggplot(data = datos2) +
geom_point(aes(x = daily_wind_gusts_10m_max, y = daily_precipitation_hours))
